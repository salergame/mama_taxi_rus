<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мама Такси - Верификация водителей</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <!-- Добавляем Supabase -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="admin-layout">
    <!-- Боковая панель -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="logo-container">
          <svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 0L30 24H0L15 0Z" fill="#000000"/>
          </svg>
          <span class="logo-text">Мама такси</span>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-item">
          <i class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 1.33333L1.33334 6.66667V14.6667H5.33334V9.33333H10.6667V14.6667H14.6667V6.66667L8 1.33333Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </i>
          <span>Главная панель</span>
        </div>
        
        <div class="nav-item active">
          <i class="nav-icon">
            <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 15V13.3333C12 12.4493 11.6839 11.6014 11.1213 10.9763C10.5587 10.3512 9.79565 10 9 10H3C2.20435 10 1.44129 10.3512 0.87868 10.9763C0.316071 11.6014 0 12.4493 0 13.3333V15" stroke="#2563EB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M6 7C7.65685 7 9 5.65685 9 4C9 2.34315 7.65685 1 6 1C4.34315 1 3 2.34315 3 4C3 5.65685 4.34315 7 6 7Z" stroke="#2563EB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M17 15V13.3333C16.9993 12.6062 16.7366 11.9027 16.2575 11.3526C15.7785 10.8024 15.1132 10.4351 14.4 10.3333" stroke="#2563EB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M11.4 1.33334C12.1153 1.43397 12.7823 1.80271 13.2622 2.35386C13.742 2.90501 14.0046 3.61056 14.0046 4.34001C14.0046 5.06946 13.742 5.77501 13.2622 6.32616C12.7823 6.87731 12.1153 7.24605 11.4 7.34667" stroke="#2563EB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </i>
          <span>Верификация водителей</span>
        </div>
        
        <div class="nav-item">
          <i class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.3333 2H2.66667C1.74619 2 1 2.74619 1 3.66667V12.3333C1 13.2538 1.74619 14 2.66667 14H13.3333C14.2538 14 15 13.2538 15 12.3333V3.66667C15 2.74619 14.2538 2 13.3333 2Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 6H15" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 10H15" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </i>
          <span>Управление заказами</span>
        </div>
        
        <div class="nav-item">
          <i class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2.66667H2C1.44772 2.66667 1 3.11438 1 3.66667V12.3333C1 12.8856 1.44772 13.3333 2 13.3333H14C14.5523 13.3333 15 12.8856 15 12.3333V3.66667C15 3.11438 14.5523 2.66667 14 2.66667Z" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M1 6.66667H15" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M5.33334 10H5.34334" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M8 10H8.01" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10.6667 10H10.6767" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </i>
          <span>Финансы и выплаты</span>
        </div>
        
        <div class="nav-item logout">
          <i class="nav-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 14H3.33333C2.97971 14 2.64057 13.8595 2.39052 13.6095C2.14048 13.3594 2 13.0203 2 12.6667V3.33333C2 2.97971 2.14048 2.64057 2.39052 2.39052C2.64057 2.14048 2.97971 2 3.33333 2H6" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M10.6667 11.3333L14 8L10.6667 4.66667" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 8H6" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </i>
          <span>Выйти</span>
        </div>
      </nav>
    </div>
    
    <!-- Основной контент -->
    <div class="main-content">
      <header class="header">
        <div class="header-title">
          <h1>Верификация водителей</h1>
          <p>Проверка и подтверждение документов</p>
        </div>
        
        <div class="header-profile">
          <button class="notification-btn">
            <i>
              <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7 16C8.10457 16 9 15.1046 9 14H5C5 15.1046 5.89543 16 7 16Z" fill="black"/>
                <path d="M7 0C3.68629 0 1 2.68629 1 6V8.5C1 9.88071 0.116362 11 0 11H14C13.8836 11 13 9.88071 13 8.5V6C13 2.68629 10.3137 0 7 0Z" fill="black"/>
              </svg>
            </i>
          </button>
          
          <div class="profile">
            <img src="assets/admin-avatar.jpg" alt="Аватар администратора" class="profile-img">
            <span class="profile-name">Админ</span>
          </div>
        </div>
      </header>
      
      <!-- Статистика верификации -->
      <div class="stats-cards">
        <div class="stats-card">
          <div class="stats-card-content">
            <div class="stats-info">
              <p class="stats-label">Ожидают проверки</p>
              <h2 class="stats-value">12</h2>
            </div>
            <div class="stats-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 8V12L15 15" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        
        <div class="stats-card">
          <div class="stats-card-content">
            <div class="stats-info">
              <p class="stats-label">Подтверждено сегодня</p>
              <h2 class="stats-value">8</h2>
            </div>
            <div class="stats-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 11L12 14L22 4" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
        
        <div class="stats-card">
          <div class="stats-card-content">
            <div class="stats-info">
              <p class="stats-label">Отклонено сегодня</p>
              <h2 class="stats-value">3</h2>
            </div>
            <div class="stats-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 6L6 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M6 6L18 18" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Фильтры -->
      <div class="filters-container">
        <div class="filters">
          <div class="filter-group">
            <label for="status-filter">Статус</label>
            <select id="status-filter" class="form-control">
              <option value="all">Все</option>
              <option value="pending" selected>Ожидают проверки</option>
              <option value="approved">Подтверждены</option>
              <option value="rejected">Отклонены</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="date-filter">Дата</label>
            <select id="date-filter" class="form-control">
              <option value="all">Все время</option>
              <option value="today" selected>Сегодня</option>
              <option value="week">Эта неделя</option>
              <option value="month">Этот месяц</option>
            </select>
          </div>
          
          <div class="filter-group search">
            <label for="search">Поиск</label>
            <input type="text" id="search" class="form-control" placeholder="Имя или ID водителя">
          </div>
        </div>
      </div>
      
      <!-- Таблица верификации -->
      <div class="verification-table-container">
        <table class="data-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Водитель</th>
              <th>Документы</th>
              <th>Дата подачи</th>
              <th>Статус</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>#D12345</td>
              <td>
                <div class="user-info">
                  <img src="assets/driver-avatar.jpg" alt="Водитель" class="user-avatar">
                  <span>Иван Петров</span>
                </div>
              </td>
              <td>
                <div class="documents">
                  <span class="document-badge">Паспорт</span>
                  <span class="document-badge">Права</span>
                  <span class="document-badge">СТС</span>
                </div>
              </td>
              <td>06.06.2025, 10:24</td>
              <td><span class="status-badge pending">Ожидает проверки</span></td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-primary btn-sm view-btn" data-id="D12345">Просмотр</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>#D12344</td>
              <td>
                <div class="user-info">
                  <img src="assets/driver-avatar.jpg" alt="Водитель" class="user-avatar">
                  <span>Алексей Смирнов</span>
                </div>
              </td>
              <td>
                <div class="documents">
                  <span class="document-badge">Паспорт</span>
                  <span class="document-badge">Права</span>
                  <span class="document-badge">СТС</span>
                </div>
              </td>
              <td>06.06.2025, 09:15</td>
              <td><span class="status-badge pending">Ожидает проверки</span></td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-primary btn-sm view-btn" data-id="D12344">Просмотр</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>#D12343</td>
              <td>
                <div class="user-info">
                  <img src="assets/driver-avatar.jpg" alt="Водитель" class="user-avatar">
                  <span>Сергей Козлов</span>
                </div>
              </td>
              <td>
                <div class="documents">
                  <span class="document-badge">Паспорт</span>
                  <span class="document-badge">Права</span>
                  <span class="document-badge">СТС</span>
                </div>
              </td>
              <td>06.06.2025, 08:42</td>
              <td><span class="status-badge pending">Ожидает проверки</span></td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-primary btn-sm view-btn" data-id="D12343">Просмотр</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>#D12342</td>
              <td>
                <div class="user-info">
                  <img src="assets/driver-avatar.jpg" alt="Водитель" class="user-avatar">
                  <span>Дмитрий Новиков</span>
                </div>
              </td>
              <td>
                <div class="documents">
                  <span class="document-badge">Паспорт</span>
                  <span class="document-badge">Права</span>
                  <span class="document-badge">СТС</span>
                </div>
              </td>
              <td>05.06.2025, 17:30</td>
              <td><span class="status-badge approved">Подтвержден</span></td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-secondary btn-sm view-btn" data-id="D12342">Просмотр</button>
                </div>
              </td>
            </tr>
            <tr>
              <td>#D12341</td>
              <td>
                <div class="user-info">
                  <img src="assets/driver-avatar.jpg" alt="Водитель" class="user-avatar">
                  <span>Михаил Соколов</span>
                </div>
              </td>
              <td>
                <div class="documents">
                  <span class="document-badge">Паспорт</span>
                  <span class="document-badge">Права</span>
                  <span class="document-badge">СТС</span>
                </div>
              </td>
              <td>05.06.2025, 16:15</td>
              <td><span class="status-badge rejected">Отклонен</span></td>
              <td>
                <div class="action-buttons">
                  <button class="btn btn-secondary btn-sm view-btn" data-id="D12341">Просмотр</button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- Пагинация -->
      <div class="pagination">
        <button class="pagination-btn" disabled>&laquo;</button>
        <button class="pagination-btn active">1</button>
        <button class="pagination-btn">2</button>
        <button class="pagination-btn">3</button>
        <button class="pagination-btn">&raquo;</button>
      </div>
    </div>
  </div>
  
  <!-- Модальное окно просмотра документов -->
  <div class="modal" id="document-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Документы водителя</h2>
        <button class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="driver-info">
          <img src="assets/driver-avatar.jpg" alt="Водитель" class="driver-photo">
          <div class="driver-details">
            <h3 id="driver-name">Иван Петров</h3>
            <p id="driver-id">#D12345</p>
            <p id="driver-phone">+7 (999) 123-45-67</p>
            <p id="driver-email">ivan.petrov@example.com</p>
          </div>
        </div>
        
        <div class="document-section">
          <h4>Паспорт</h4>
          <div class="document-images">
            <div class="document-image">
              <img src="assets/passport-front.jpg" alt="Паспорт (лицевая сторона)">
              <p>Лицевая сторона</p>
            </div>
            <div class="document-image">
              <img src="assets/passport-back.jpg" alt="Паспорт (обратная сторона)">
              <p>Обратная сторона</p>
            </div>
          </div>
        </div>
        
        <div class="document-section">
          <h4>Водительское удостоверение</h4>
          <div class="document-images">
            <div class="document-image">
              <img src="assets/license-front.jpg" alt="Водительское удостоверение (лицевая сторона)">
              <p>Лицевая сторона</p>
            </div>
            <div class="document-image">
              <img src="assets/license-back.jpg" alt="Водительское удостоверение (обратная сторона)">
              <p>Обратная сторона</p>
            </div>
          </div>
        </div>
        
        <div class="document-section">
          <h4>Свидетельство о регистрации ТС</h4>
          <div class="document-images">
            <div class="document-image">
              <img src="assets/vehicle-reg-front.jpg" alt="СТС (лицевая сторона)">
              <p>Лицевая сторона</p>
            </div>
            <div class="document-image">
              <img src="assets/vehicle-reg-back.jpg" alt="СТС (обратная сторона)">
              <p>Обратная сторона</p>
            </div>
          </div>
        </div>
        
        <div class="document-section">
          <h4>Автомобиль</h4>
          <div class="document-images">
            <div class="document-image">
              <img src="assets/car-front.jpg" alt="Автомобиль (спереди)">
              <p>Вид спереди</p>
            </div>
            <div class="document-image">
              <img src="assets/car-side.jpg" alt="Автомобиль (сбоку)">
              <p>Вид сбоку</p>
            </div>
            <div class="document-image">
              <img src="assets/car-back.jpg" alt="Автомобиль (сзади)">
              <p>Вид сзади</p>
            </div>
          </div>
        </div>
        
        <div class="comment-section">
          <h4>Комментарий</h4>
          <textarea id="admin-comment" placeholder="Введите комментарий (необязательно)"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="reject-btn">Отклонить</button>
        <button class="btn btn-success" id="approve-btn">Подтвердить</button>
      </div>
    </div>
  </div>

  <!-- Скрипты -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="app.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Проверка аутентификации
      if (!checkAuth()) return;
      
      // Обработчики для кнопок просмотра
      const viewButtons = document.querySelectorAll('.view-btn');
      const modal = document.getElementById('document-modal');
      const closeBtn = document.querySelector('.close-btn');
      const approveBtn = document.getElementById('approve-btn');
      const rejectBtn = document.getElementById('reject-btn');
      
      // Открытие модального окна
      viewButtons.forEach(button => {
        button.addEventListener('click', function() {
          const driverId = this.getAttribute('data-id');
          // В реальном приложении здесь будет загрузка данных водителя по ID
          document.getElementById('driver-id').textContent = '#' + driverId;
          modal.style.display = 'flex';
        });
      });
      
      // Закрытие модального окна
      closeBtn.addEventListener('click', function() {
        modal.style.display = 'none';
      });
      
      // Закрытие модального окна при клике вне его
      window.addEventListener('click', function(event) {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
      
      // Подтверждение документов
      approveBtn.addEventListener('click', function() {
        const driverId = document.getElementById('driver-id').textContent.substring(1);
        const comment = document.getElementById('admin-comment').value;
        
        // В реальном приложении здесь будет отправка запроса на сервер
        alert(`Документы водителя ${driverId} подтверждены.\nКомментарий: ${comment || 'Нет комментария'}`);
        modal.style.display = 'none';
      });
      
      // Отклонение документов
      rejectBtn.addEventListener('click', function() {
        const driverId = document.getElementById('driver-id').textContent.substring(1);
        const comment = document.getElementById('admin-comment').value;
        
        if (!comment) {
          alert('Пожалуйста, укажите причину отклонения в комментарии.');
          return;
        }
        
        // В реальном приложении здесь будет отправка запроса на сервер
        alert(`Документы водителя ${driverId} отклонены.\nПричина: ${comment}`);
        modal.style.display = 'none';
      });
      
      // Обработчики для фильтров
      document.getElementById('status-filter').addEventListener('change', filterDrivers);
      document.getElementById('date-filter').addEventListener('change', filterDrivers);
      document.getElementById('search').addEventListener('input', filterDrivers);
      
      function filterDrivers() {
        // В реальном приложении здесь будет логика фильтрации
        console.log('Фильтрация водителей...');
      }
      
      // Обработчик для пагинации
      document.querySelectorAll('.pagination-btn').forEach(button => {
        button.addEventListener('click', function() {
          if (this.disabled) return;
          
          document.querySelectorAll('.pagination-btn').forEach(btn => {
            btn.classList.remove('active');
          });
          
          this.classList.add('active');
          
          // В реальном приложении здесь будет логика пагинации
          console.log('Переход на страницу:', this.textContent);
        });
      });
    });
  </script>
</body>
</html> 